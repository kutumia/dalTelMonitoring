<%- include('../../includesMonitoring/header')-%>
<div id="wrapper" class="wrapper" >
    <%- include('../../includesMonitoring/topbar')-%>
    <div class="page-wrap">
        <%- include('../../includesMonitoring/sidebar')-%>
        <div class="main-content">
            <div class="container-fluid">
                <div class="row clearfix">
                    <div class="col-md-10">
                        <h1 class="text-center"><%= title %></h1>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <a href="/pd/addActivities" class="btn btn-danger">Add Activities</a><br>
                            <h1>Response activities</h1>
                        </div>
                    </div>
                </div>
                <!-- <div class="row mb-2">
                    <div class="col-md-12">
                        <a href="/upazilla/trainedFarmerForm" class="btn btn-success btn-group-sm ">প্রশিক্ষণপ্রাপ্ত কৃষকের তথ্য ফর্ম</a>
                    </div>

                </div> -->

                <div class="table-responsive" id="output"></div>


                <div id="output"></div>
                <!--                    <div id="loading" class="loading"><img src="{{ asset('assets/img/icon/loading.gif') }}" alt=""></div>-->
            </div>
        </div>
    </div>
</div>



<%- include('../../includesMonitoring/footer')-%>
<script>

    $(document).ready(function(){

        $('.dropdown a.test').on("click", function(e){
            $(this).next('ul').toggle();
            e.stopPropagation();
            e.preventDefault();
        });
    });
</script>

<script type="text/javascript">

    $("body").on("click", "#btnExport", function () {
        html2canvas($('#tblCustomers')[0], {
            onrendered: function (canvas) {
                var data = canvas.toDataURL();
                var docDefinition = {
                    content: [{
                        image: data,
                        width: 650
                    }]
                };
                pdfMake.createPdf(docDefinition).download("farmer-details.pdf");
            }
        });
    });

    $('#district').on("change",function () {
        var district = $('#district').val();
        $.ajax({
            type: "POST",
            url: "/pd/bijDistrictFilter",
            data: {district: district},
            datatype: "json",
            beforeSend: function() {
                // setting a timeout
                $('#loading').show();
                $('#output').hide();
            },
            success: function (data) {
                $('#output').html(data);
                $('#tblCustomers').DataTable();
                $('#upazilla').empty();
                if(data){
                    $.each(data, function(key, value){
                        $('#upazilla').append('<option value="'+value.id+'">' + value.uname + '</option>');

                    });
                }else {
                    $('#upazilla').empty();
                }

            },
            complete: function() {
                $('#loading').hide();
                $('#output').show();
            }
        });
    });

    $("#wrapper").load( "no url rn",function() {

        var year = new Date().getFullYear();
        var upazilla = $('#upazilla').val();
        $.ajax({
            type: "POST",
            url: "/pd/bijFilter",
            data: {year: year,upazilla:upazilla},
            datatype: "json",
            beforeSend: function() {
                // setting a timeout
                $('#loading').show();
                $('#output').hide();

            },
            success: function (data) {
                $('#output').html(data);
                $('#tblCustomers').DataTable();
            },
            complete: function() {
                $('#loading').hide();
                $('#output').show();
            }
        });
    });

    $('#submit').on("click",function () {
        var year = $('#year').val();
        var upazilla = $('#upazilla').val();
        $.ajax({
            type: "POST",
            url: "/pd/bijFilter",
            data: {year: year,upazilla:upazilla},
            datatype: "json",
            beforeSend: function() {
                // setting a timeout
                $('#loading').show();
                $('#output').hide();
            },
            success: function (data) {
                $('#output').html(data);
                $('#tblCustomers').DataTable();
            },
            complete: function() {
                $('#loading').hide();
                $('#output').show();
            }
        });
    });

    $(document).ready(function() {
        $('#tblCustomers').DataTable();
    } );



</script>